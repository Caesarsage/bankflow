syntax = "proto3";

package transaction;


service TransactionService {
  rpc CreateTransfer(CreateTransferRequest) returns (CreateTransferResponse);
  rpc GetTransaction(GetTransactionRequest) returns (GetTransactionResponse);
  rpc GetAccountTransactions(GetAccountTransactionsRequest) returns (GetAccountTransactionsResponse);
  rpc ReverseTransaction(ReverseTransactionRequest) returns (ReverseTransactionResponse);
}

message Transaction {
  string id = 1;
  string transaction_ref = 2;
  string from_account_id = 3;
  string to_account_id = 4;
  double amount = 5;
  string currency = 6;
  string transaction_type = 7;
  string status = 8;
  string description = 9;
  int64 created_at = 10;
}

message CreateTransferRequest {
  string from_account_id = 1;
  string to_account_id = 2;
  double amount = 3;
  string currency = 4;
  string description = 5;
}

message CreateTransferResponse {
  Transaction transaction = 1;
  Error error = 2;
}

message GetTransactionRequest {
  string transaction_id = 1;
}

message GetTransactionResponse {
  Transaction transaction = 1;
  Error error = 2;
}

message GetAccountTransactionsRequest {
  string account_id = 1;
  int32 page = 2;
  int32 limit = 3;
}

message GetAccountTransactionsResponse {
  repeated Transaction transactions = 1;
  int32 total = 2;
  Error error = 3;
}

message ReverseTransactionRequest {
  string transaction_id = 1;
}

message ReverseTransactionResponse {
  Transaction reversal = 1;
  bool success = 2;
  Error error = 3;
}

message Error {
  string code = 1;
  string message = 2;
}

